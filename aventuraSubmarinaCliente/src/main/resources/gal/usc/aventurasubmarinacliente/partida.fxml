<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.image.ImageView?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="gal.usc.aventurasubmarinacliente.Controladores.PartidaController"
            fx:id="root"
            styleClass="root"
            stylesheets="@/general.css">

    <!-- ===== TOP BAR ===== -->
    <top>
        <HBox fx:id="topBar"
              alignment="CENTER_LEFT"
              spacing="20"
              styleClass="top-bar">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>

            <Button text="← Salir"
                    fx:id="btnSalir"
                    onAction="#onSalir"
                    styleClass="exit-button"/>
        </HBox>
    </top>

    <!-- ===== CENTER ===== -->
    <center>
        <ScrollPane fx:id="scrollBoard"
                    fitToWidth="true"
                    fitToHeight="true">
            <content>
                <VBox fx:id="boardContent"
                      spacing="18">
                    <padding>
                        <Insets top="18" right="18" bottom="18" left="18"/>
                    </padding>

                    <!-- ===== HEADER ROW ===== -->
                    <HBox fx:id="headerRow"
                          spacing="20"
                          alignment="TOP_LEFT"
                          VBox.vgrow="NEVER">

                        <!-- OXÍXENO -->
                        <VBox fx:id="oxygenPanel"
                              minWidth="160"
                              prefWidth="200"
                              maxWidth="260"

                              minHeight="260"
                              prefHeight="260"
                              maxHeight="260"

                              HBox.hgrow="ALWAYS"
                              VBox.vgrow="NEVER"

                              alignment="CENTER"
                              spacing="10"
                              styleClass="oxygen-panel">

                            <ImageView fx:id="imgBombona"
                                       fitWidth="120"
                                       preserveRatio="true"/>

                            <Label fx:id="lblOxigeno"
                                   text="30"
                                   styleClass="oxygen-label"/>

                            <Label text="O₂"
                                   styleClass="oxygen-unit"/>
                        </VBox>

                        <!-- SUBMARINO (CASILLA 0) -->
                        <StackPane fx:id="cell0Container"
                                   minWidth="260"
                                   prefWidth="420"
                                   maxWidth="900"

                                   minHeight="260"
                                   prefHeight="260"
                                   maxHeight="260"

                                   HBox.hgrow="ALWAYS"
                                   VBox.vgrow="NEVER"

                                   styleClass="cell0-container"/>

                        <Region minWidth="30"/>


                        <HBox fx:id="bottomPanel"
                              alignment="CENTER"

                              minWidth="220"
                              prefWidth="260"
                              maxWidth="300"

                              minHeight="170"
                              prefHeight="170"
                              maxHeight="170"

                              HBox.hgrow="ALWAYS"
                              VBox.vgrow="NEVER"

                              styleClass="bottom-panel">
                            <padding>
                                <Insets top="15" right="15" bottom="15" left="15"/>
                            </padding>

                            <!-- CONTIDO VERTICAL -->
                            <VBox spacing="18"
                                  alignment="CENTER">

                                <!-- FILA SUPERIOR: OPCIÓNS -->
                                <HBox spacing="16"
                                      alignment="TOP_CENTER">

                                    <!-- Movemento -->
                                    <VBox spacing="8"
                                          minWidth="90"
                                          alignment="CENTER"
                                          styleClass="movement-panel">
                                        <ToggleButton text="Subir"
                                                      fx:id="toggleSubir"
                                                      onAction="#onSubir"/>
                                        <ToggleButton text="Bajar"
                                                      fx:id="toggleBajar"
                                                      onAction="#onBajar"/>
                                    </VBox>

                                    <!-- Acción -->
                                    <VBox spacing="8"
                                          minWidth="90"
                                          alignment="CENTER"
                                          styleClass="interaction-panel">
                                        <ToggleButton text="Coger"
                                                      fx:id="toggleCoger"
                                                      onAction="#onCoger"/>
                                        <ToggleButton text="Dejar"
                                                      fx:id="toggleDejar"
                                                      onAction="#onDejar"/>
                                        <ToggleButton text="Nada"
                                                      fx:id="toggleNada"
                                                      onAction="#onNada"/>
                                    </VBox>

                                </HBox>

                                <!-- FILA INFERIOR: BOTÓNS -->
                                <HBox spacing="20"
                                      alignment="CENTER">

                                    <!-- Dados -->
                                    <VBox spacing="6"
                                          alignment="CENTER">
                                        <HBox spacing="6"
                                              alignment="CENTER">
                                            <ImageView fx:id="imgDado1"
                                                       fitWidth="50"
                                                       preserveRatio="true"/>
                                            <ImageView fx:id="imgDado2"
                                                       fitWidth="50"
                                                       preserveRatio="true"/>
                                        </HBox>

                                        <Button fx:id="btnDado"
                                                text="Lanzar dados"
                                                onAction="#onLanzarDado"
                                                styleClass="dice-button"/>
                                    </VBox>

                                    <!-- Seguinte -->
                                    <Button text="▶"
                                            fx:id="btnSiguiente"
                                            onAction="#onSiguiente"
                                            styleClass="next-button"/>
                                </HBox>

                            </VBox>
                        </HBox>


                    </HBox>

                    <!-- ===== TABLERO ===== -->
                    <GridPane fx:id="gridBoard"
                              hgap="12"
                              vgap="12"
                              styleClass="grid-board"/>
                </VBox>
            </content>
        </ScrollPane>
    </center>

    <!-- ===== PANEL DEREITO ===== -->
    <right>
        <VBox fx:id="rightPanel"
              spacing="15"
              prefWidth="220"
              styleClass="right-panel">
            <padding>
                <Insets top="15" right="15" bottom="15" left="15"/>
            </padding>

            <Button text="Cuenta" fx:id="btnCuenta" onAction="#onCuenta"/>
            <Button text="Ayuda"  fx:id="btnAyuda"  onAction="#onAyuda"/>

            <Separator/>

            <Button text="Iniciar partida"
                    fx:id="btnIniciarPartida"
                    onAction="#onIniciarPartida"/>

            <Label text="Turno:" styleClass="info-label"/>
            <Label fx:id="lblTurnoJugador" styleClass="info-value"/>

            <Label text="Tesoros:" styleClass="info-label"/>
            <Label fx:id="lblTesoros" styleClass="info-value"/>

            <Label text="Ronda:" styleClass="info-label"/>
            <Label fx:id="lblRonda" styleClass="info-value"/>

            <Separator/>

            <Label text="Tabla puntuaciones global"
                   styleClass="section-title"/>

            <VBox fx:id="scoreBoard"
                  spacing="5"
                  styleClass="score-board">
                <Label fx:id="lblJugador1Score" styleClass="score-label"/>
                <Label fx:id="lblJugador2Score" styleClass="score-label"/>
                <Label fx:id="lblJugador3Score" styleClass="score-label"/>
                <Label fx:id="lblJugador4Score" styleClass="score-label"/>
                <Label fx:id="lblJugador5Score" styleClass="score-label"/>
                <Label fx:id="lblJugador6Score" styleClass="score-label"/>
            </VBox>

            <Label fx:id="lblError"
                   styleClass="error-label"/>
        </VBox>
    </right>

</BorderPane>
